id: project-auditor
display_name: Project Auditor
scope: project
description: |
  Auditor agents aggregate status across multiple entities to provide project-wide
  dashboards and health views. They discover entities, gather data from each,
  calculate aggregate metrics, and generate comprehensive reports.

# Model and tool configuration
config:
  recommended_model: claude-sonnet-4-5
  common_tools:
    - Read
    - Glob
    - Grep
    - Skill
  required_tools:
    - Glob
  typical_complexity: medium
  requires_user_interaction: false
  maintains_state: false

# FABER workflow integration
faber:
  phase_affinity:
    - evaluate
  exit_codes:
    - code: 0
      meaning: Audit complete, all healthy
    - code: 1
      meaning: Audit complete, warnings present
    - code: 2
      meaning: Audit complete, critical issues
    - code: 3
      meaning: Audit failed

# Documentation and guidance
documentation:
  when_to_use:
    - Getting project-wide health overview
    - Aggregating status across multiple entities
    - Creating dashboards and summary views
    - Identifying patterns across entities
    - Generating management reports
  examples:
    - project-health-auditor
    - workflow-auditor
    - documentation-auditor

# Agent structure requirements
structure:
  required_sections:
    - CONTEXT
    - CRITICAL_RULES
    - IMPLEMENTATION
    - OUTPUTS
  recommended_sections:
    - INPUTS
    - METRICS
    - COMPLETION_CRITERIA

# Core rules all auditors must follow
critical_rules:
  - id: cross-entity-scope
    title: Cross-Entity Scope
    description: Aggregate across MULTIPLE entities. Provide system-wide view.

  - id: summary-focus
    title: Summary Focus
    description: Emphasize aggregate metrics. Show distributions and counts. Highlight outliers.

  - id: efficient-discovery
    title: Efficient Discovery
    description: Efficiently find all entities. Handle large numbers. Support filtering.

  - id: consistent-metrics
    title: Consistent Metrics
    description: Use same metrics across all entities. Enable meaningful comparison.

  - id: actionable-insights
    title: Actionable Insights
    description: Highlight issues needing attention. Show trends and patterns. Provide recommendations.

  - id: non-modifying
    title: Non-Modifying
    description: ONLY read, never modify. Safe for regular execution. No side effects.

# Standard implementation workflow
implementation_steps:
  - Discover all relevant entities
  - Gather data from each entity
  - Aggregate metrics
  - Identify issues and patterns
  - Generate dashboard
  - Provide recommendations

# Output specification format
output_format:
  type: dashboard
  required_fields:
    - summary
    - by_status
    - overall_score
  recommended_fields:
    - breakdown
    - issues
    - recommendations

# Frontmatter schema for generated agents
frontmatter_schema:
  required:
    - name
    - description
    - model
    - tools
  optional:
    - color
    - agent_type
  properties:
    name:
      type: string
      pattern: "^[a-z][a-z0-9-]*$"
      description: Agent name in lowercase with hyphens
    description:
      type: string
      maxLength: 200
      description: Should describe what it audits across the project
    model:
      type: string
      enum:
        - claude-haiku-4-5
        - claude-sonnet-4-5
        - claude-opus-4-6
      default: claude-sonnet-4-5
    tools:
      type: array
      items:
        type: string
        enum:
          - Read
          - Glob
          - Grep
          - Skill
      note: Should NOT include Write or Edit (read-only)
    color:
      type: string
      enum:
        - red
        - orange
        - yellow
        - green
        - blue
        - purple
        - pink
        - gray
        - cyan
    agent_type:
      type: string
      description: Links to this template type (project-auditor)
