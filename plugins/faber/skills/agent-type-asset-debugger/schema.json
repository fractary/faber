{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Debugger Agent Schema",
  "description": "JSON Schema for validating debugger agent frontmatter and structure",
  "properties": {
    "frontmatter": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9-]*$",
          "description": "Agent name in lowercase with hyphens"
        },
        "description": {
          "type": "string",
          "maxLength": 200,
          "description": "Clear, actionable description"
        },
        "model": {
          "type": "string",
          "enum": ["claude-haiku-4-5", "claude-sonnet-4-5", "claude-opus-4-5"],
          "default": "claude-sonnet-4-5",
          "description": "LLM model to use"
        },
        "tools": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["Bash", "Read", "Write", "Edit", "Glob", "Grep", "AskUserQuestion", "Skill", "WebFetch", "WebSearch"]
          },
          "description": "Tools available to the agent"
        },
        "color": {
          "type": "string",
          "pattern": "^(red|orange|yellow|green|blue|purple|pink|gray|cyan)$",
          "description": "Optional color for visual identification"
        }
      },
      "required": ["name", "description", "model", "tools"]
    },
    "sections": {
      "type": "object",
      "properties": {
        "context": {
          "type": "boolean",
          "const": true,
          "description": "CONTEXT section is required"
        },
        "critical_rules": {
          "type": "boolean",
          "const": true,
          "description": "CRITICAL_RULES section is required"
        },
        "implementation": {
          "type": "boolean",
          "const": true,
          "description": "IMPLEMENTATION section is required"
        },
        "outputs": {
          "type": "boolean",
          "const": true,
          "description": "OUTPUTS section is required"
        },
        "knowledge_base": {
          "type": "boolean",
          "description": "KNOWLEDGE_BASE section is recommended"
        }
      },
      "required": ["context", "critical_rules", "implementation", "outputs"]
    },
    "implementation_steps": {
      "type": "array",
      "description": "Required implementation steps for debuggers",
      "items": {
        "type": "string"
      },
      "minItems": 4,
      "contains": {
        "anyOf": [
          { "pattern": "(?i)gather.*context|collect.*info" },
          { "pattern": "(?i)search.*knowledge|check.*past" },
          { "pattern": "(?i)analyze|diagnose|root.*cause" },
          { "pattern": "(?i)propose.*solution|recommend.*fix" }
        ]
      }
    }
  },
  "required": ["frontmatter", "sections"]
}
